{"version":3,"names":["_reactNative","require","_reactNativeGeolocationService","_interopRequireDefault","e","__esModule","default","ALL_PERMISSIONS","PermissionsAndroid","PERMISSIONS","BLUETOOTH_SCAN","BLUETOOTH_CONNECT","ACCESS_FINE_LOCATION","requestAllPermissions","granted","requestMultiple","allGranted","every","permission","RESULTS","GRANTED","notGranted","filter","alertMessage","map","join","console","warn","log","error","exports","checkAllPermissions","results","Promise","all","check","isGranted","index","requestLocationService","resolve","Geolocation","getCurrentPosition","message","enableHighAccuracy","timeout","maximumAge"],"sources":["permission.ts"],"sourcesContent":["import { PermissionsAndroid } from 'react-native';\nimport Geolocation from 'react-native-geolocation-service';\n\nconst ALL_PERMISSIONS = [\n    PermissionsAndroid.PERMISSIONS.BLUETOOTH_SCAN,\n    PermissionsAndroid.PERMISSIONS.BLUETOOTH_CONNECT,\n    PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\n];\n\nexport const requestAllPermissions = async () => {\n    try {\n        const granted = await PermissionsAndroid.requestMultiple(ALL_PERMISSIONS);\n        const allGranted = ALL_PERMISSIONS.every((permission) => granted[permission] === PermissionsAndroid.RESULTS.GRANTED);\n\n        if (!allGranted) {\n            const notGranted = ALL_PERMISSIONS.filter((permission) => granted[permission] !== PermissionsAndroid.RESULTS.GRANTED);\n            const alertMessage = notGranted.map((permission: any) => permission + ' is not granted.').join('\\n');\n            console.warn(alertMessage)\n            return false\n        }\n\n        console.log('ALL GRANTED', allGranted);\n        return allGranted;\n    } catch (error) {\n        console.error('Error requesting permissions', error);\n        return false;\n    }\n};\n\nexport const checkAllPermissions = async () => {\n    try {\n        const results = await Promise.all(ALL_PERMISSIONS.map(permission => PermissionsAndroid.check(permission)));\n        const allGranted: boolean = results.every((isGranted: boolean) => isGranted);\n        if (!allGranted) {\n            const notGranted = ALL_PERMISSIONS.filter(({ }, index) => !results[index]);\n            const alertMessage = notGranted.map((permission) => `${permission} is not granted.`).join('\\n');\n            console.warn(alertMessage)\n            return false\n        }\n        return allGranted;\n    } catch (error) {\n        console.error('Error checking permissions', error);\n        return false;\n    }\n};\n\nexport const requestLocationService = async () => {\n    return new Promise((resolve) => {\n      Geolocation.getCurrentPosition(\n          () => {\n              resolve(true)\n          },\n          (error) => {\n              resolve(false)\n              console.error( error.message);\n          },\n          { enableHighAccuracy: true, timeout: 15000, maximumAge: 10000 }\n      );\n  }) \n  }"],"mappings":"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","ignoreList":[]}